@*@model IEnumerable<CharityStartAtHome.Models.Cloth>*@
@model PagedList.IPagedList<CharityStartAtHome.Models.Viccharity>

@using PagedList.Mvc;
<style>
    .back-to-top {
        cursor: pointer;
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: none;
    }

    h1 {
        font-family: "Arial Black", Gadget, sans-serif;
        color: #2aaf8e;
        font-size: 50px;
    }

    h2 {
        font-family: "Arial Black", Gadget, sans-serif;
        color: #2aaf8e;
        font-size: 30px;
    }

    h3 {
        font-family: 'Arial Unicode MS';
        color: #2aaf8e;
        font-size: 20px;
    }

    h4 {
        font-family: 'Arial Unicode MS';
        color: #2aaf8e;
        font-size: 15px;
    }

    p {
        font-family: 'Arial Unicode MS';
        font-size: 20px;
    }

    b {
        font-family: 'Arial Unicode MS';
        color: #2aaf8e;
        font-size: 20px;
    }

    ul.pagination {
        margin: 0;
    }

    .pagination li {
        list-style-type: none;
        float: left;
        min-width: 15px;
    }

    input[type=text] {
        padding-right: 100px;
        width: 800px !important;
    }

    input[type=text] {
        width: 800px;
        box-sizing: border-box;
        border: 2px solid #ccc;
        border-radius: 4px;
        font-size: 16px;
        background-color: white;
        background-image: url('searchicon.png');
        background-position: 10px 10px;
        background-repeat: no-repeat;
        padding: 12px 20px 12px 40px;
        -webkit-transition: width 0.4s ease-in-out;
        transition: width 0.4s ease-in-out;
    }

        input[type=text]:focus {
            width: 300%;
        }


    ul.breadcrumb {
        padding: 8px 16px;
        list-style: none;
        background-color: #eee;
    }

        ul.breadcrumb li {
            display: inline;
        }

            ul.breadcrumb li + li:before {
                padding: 8px;
                color: black;
                content: "/\00a0";
            }
</style>
<html>

<body>


    <ul class="breadcrumb" style="margin-top:50px">
        Your are here:
        <li>@Html.ActionLink("Home", "Index", "Home")</li>
        <li>@Html.ActionLink("What you can help", "Index", "Home")</li>
        <li>@Html.ActionLink("Donate Time", "Time", "Viccharities")</li>
        <li style="color:black">Find nearby organizations</li>
    </ul>

    <h1 style="margin-left:20px">Find charity organization near you</h1>
    <h4 style="margin-left:40px;">
        <div id="temp">
        </div>
        <div id="temp2">
        </div>
        <div id="minutely"></div>
        @*<img id="icon">
            <canvas id="icon" width="128" height="128"></canvas>
            <canvas id="icon" width="128" height="128"></canvas>*@
    </h4>
    @using (Html.BeginForm("List", "Viccharities", FormMethod.Get))
    {

        <div class="text-center">
            <b>
                I am interested in:
            </b>
            <select id="activity" class="btn btn-success btn-lg" name="activity" @*style="margin-left:20px"*@>
                <option value="" name="activity" selected="selected">
                    Choose a category of charity type...
                </option>

                <option value="Aged Care activities" name="activity">
                    Aged Care activities
                </option>
                <option value="Animal Protection" name="activity">
                    Animal Protection
                </option>
                <option value="Civic and advocacy activities" name="activity">
                    Civic and advocacy activities
                </option>
                <option value="Culture and arts" name="activity">
                    Culture and arts
                </option>
                <option value="Economic and Social Services" name="activity">
                    Economic and Social Services
                </option>
                <option value="Education (Primary, Secondary, High, Other)" name="activity">
                    Education (Primary, Secondary, High, Other)
                </option>
                <option value="Emergency relief" name="activity">
                    Emergency relief
                </option>
                <option value="Employment and training" name="activity">
                    Employment and training
                </option>
                <option value="Grant-Making Activities" name="activity">
                    Grant-Making Activities
                </option>
                <option value="Hospital services and rehabilitation activities" name="activity">
                    Hospital services and rehabilitation activities
                </option>
                <option value="Environmental Activities" name="activity">
                    Environmental Activities
                </option>
                <option value="Health services delivery" name="activity">
                    Health services delivery
                </option>
                <option value="Housing activities" name="activity">
                    Housing activities
                </option>
                <option value="Income support and maintenance" name="activity">
                    Income support and maintenance
                </option>
                <option value="International Activities" name="activity">
                    International Activities
                </option>
                <option value="Law and legal services" name="activity">
                    Law and legal services
                </option>
                <option value="Mental health and crisis intervention" name="activity">
                    Mental health and crisis intervention
                </option>
                <option value="Political activities" name="activity">
                    Political activities
                </option>
                <option value="Religious Activities" name="activity">
                    Religious Activities
                </option>
                <option value="Research" name="activity">
                    Research
                </option>
                <option value="Sport" name="activity">
                    Sport
                </option>
                <option value="'OTHER PHILANTHROPIC" name="activity">
                    'OTHER PHILANTHROPIC
                </option>

            </select>


            <div class="row" id="inputGroup" style="padding-left:40px">
                <p class="text-center">
                    <input type="text" name="SearchString" placeholder="Search by Postcode e.g. 3000 or Address" id="SearchString" value="@Request["SearchString"]" autofocus style="display: inline-block; width:700px">
                    @*Find by name: @Html.TextBox("SearchString")*@
                    <button class="btn btn-success btn-lg" value="Search" type="submit" onSubmit="return saveComment();"> Search    <i class="glyphicon glyphicon-search"></i></button>
                </p>
            </div>

        </div>
    }

    @if (Model.Count == 0)
    {
        <p style="margin-left:100px"> <text>No charity organization is found.</text></p>
        <p style="margin-left:100px"> <text>Please make sure you input a valid postcode/address.</text></p>
    }
    @*@if (Model.Count != 0)
                {
                    var count = Model.Count;
                    var text = "There are " + count + " results found";
            <p style="margin-left:100px"> @text</p>
        }*@

    <ul @*class="list-group collapse"*@ id="myUL" style="margin-right:50px; margin-left:50px">
        @foreach (var item in Model)
        {
            <li>
                <div class="row list-group-item flex-column">



                    <h2>@Html.DisplayFor(modelItem => item.Name)</h2>

                    <p>
                        @Html.DisplayFor(modelItem => item.Orgname)
                        @Html.DisplayFor(modelItem => item.Address1)
                    </p>
                    <h3>Post Code:</h3>
                    <p>@Html.DisplayFor(modelItem => item.Postcode)</p>
                    <h3>Activity:</h3>
                    <p>
                        @Html.DisplayFor(modelItem => item.MainActivit)
                    </p>
                    <h3>Purpose:</h3>
                    <p>
                        @Html.DisplayFor(modelItem => item.Purposes)
                    </p>

                    <div>@Html.ActionLink("Available transport facilities & Café Nearby", "Details", new { id = item.Id }, new { @class = "btn btn-success btn-lg" })</div>
                </div>
            </li>

        }

    </ul>
    <div class="text-center">
        Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

        @Html.PagedListPager(Model, page => Url.Action("List",
    new
    {
        page,
        sortOrder = ViewBag.CurrentSort,
        currentFilter = ViewBag.CurrentFilter,
        activity = Request.QueryString["activity"],
        SearchString = Request.QueryString["SearchString"]

    }))

    </div>
    <div class="text-center" style="width:100%">
        <p id="result" style="font-size:12px; color:black" class="center"></p>

    </div>
    <a id="back-to-top" href="#" class="btn btn-primary btn-lg back-to-top" role="button" title="Click to return on the top page" data-toggle="tooltip" data-placement="left"><span class="glyphicon glyphicon-chevron-up"></span></a>
</body>

</html>
<script>
    $(document).ready(function () {
        $(window).scroll(function () {
            if ($(this).scrollTop() > 50) {
                $('#back-to-top').fadeIn();
            } else {
                $('#back-to-top').fadeOut();
            }
        });
        // scroll body to 0px on click
        $('#back-to-top').click(function () {
            $('#back-to-top').tooltip('hide');
            $('body,html').animate({
                scrollTop: 0
            }, 800);
            return false;
        });

        $('#back-to-top').tooltip('show');

    });

</script>
<script>
    function weather() {

        var location = document.getElementById("location");
        var apiKey = 'b5720867ff3d98c666593de2ef32f09b'; // PLEASE SIGN UP FOR YOUR OWN API KEY
        var url = 'https://api.forecast.io/forecast/';

        navigator.geolocation.getCurrentPosition(success, error);

        function success(position) {
            latitude = position.coords.latitude;
            longitude = position.coords.longitude;

            //location.innerHTML = 'Latitude is ' + latitude + '° <br> Longitude is ' + longitude + '°';

            $.getJSON(url + apiKey + "/" + latitude + "," + longitude + "?callback=?", function (data) {
                var str = data.currently.temperature;
                var celsius = ((str - 32) / 1.8).toFixed(2);

                $('#temp').html('Current temperature is ' + celsius + '° C ' + 'and the weather is ' + data.currently.summary);
                $('#temp2').html('This week forecast: ' + data.daily.summary);

                $('#icon').html(data.currently.icon);
                $('#minutely').html(data.minutely.summary);
            });
        }

        function error() {
            location.innerHTML = "Unable to retrieve your location";
        }

        location.innerHTML = "Locating...";
    }

    weather();
</script>



